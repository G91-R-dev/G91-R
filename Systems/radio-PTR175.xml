<?xml version="1.0"?>

<system name="radio-PTR175">
    
    <property value="10.0">systems/gauges/radio/ptr175/freq-11000-set</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-00100-set</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-00011-set</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-set</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-10000-digit</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-01000-digit</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-00100-digit</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-00001-digit</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-channel</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-G-value</property>
    <property value="0.0">systems/gauges/radio/ptr175/freq-M-active</property>
    <property value="0.5">systems/gauges/radio/ptr175/vol-set</property>
    <property value="0.5">systems/gauges/radio/ptr175/volume</property>
    <property value="1.0">systems/gauges/radio/ptr175/chan-selector</property>
    <property value="0.0">systems/gauges/radio/ptr175/knob-function-set</property>
    <property value="0.0">systems/gauges/radio/ptr175/operative-start-stop</property>
    <property value="0.0">systems/gauges/radio/ptr175/operative</property>
    <property value="0.0">systems/gauges/radio/ptr175/operative-heating</property>
    
    <channel name="systems gauges radio electric" execrate="32">
        
        <switch name="systems/gauges/radio/ptr175/operative-start-stop">
            <default value="0"/>
            <test logic="AND" value="1">
                systems/electric/bus[1]/UHF-radio/fuse == 1
                systems/electric/bus[1]/V GE 24.0
                systems/gauges/radio/ptr175/knob-function-set GE 0.5
            </test>
        </switch>
        
        <switch name="systems/electric/bus[1]/UHF-radio/I">
            <default value="0.0"/>
            <test logic="AND" value="18">
                systems/gauges/radio/ptr175/operative-start-stop == 1
            </test>
        </switch>
        
        <!-- This delay is the time for starting the electronics -->
        <lag_filter name="systems/gauges/radio/ptr175/operative-heating">
            <input>systems/gauges/radio/ptr175/operative-start-stop</input>
            <c1>0.2</c1>
        </lag_filter>
        
        <switch name="systems/gauges/radio/ptr175/operative">
            <default value="0.0"/>
            <test logic="AND" value="1.0">
                systems/gauges/radio/ptr175/operative-heating GT 0.9
            </test>
        </switch>
        
        <scheduled_gain name="systems/gauges/radio/ptr175/volume">
            <input>systems/gauges/radio/ptr175/vol-set</input>
            <table>
                <independentVar>systems/gauges/radio/ptr175/operative-heating</independentVar>
                <tableData>
                    0.0     0.0
                    0.5     0.0
                    0.6     0.1
                    1.0     1.0
                </tableData>
            </table>
            <gain>1.0</gain>
        </scheduled_gain>
        
        <switch name="/sim/sound/atc/enabled">
            <default value="0.0"/>
            <test logic="AND" value="1.0">
                systems/gauges/radio/ptr175/operative-start-stop GE 0.5
            </test>
        </switch>
        
        <switch name="/sim/sound/atc/volume">
            <default value="0.0"/>
            <test logic="AND" value="systems/gauges/radio/ptr175/volume">
                systems/gauges/radio/ptr175/operative-start-stop GE 0.5
            </test>
        </switch>
        
    </channel>
    
    <channel name="systems gauges radio set frequence" execrate="4">
        
        <fcs_function>
            <function>
                <integer>
                    <quotient>
                        <p>systems/gauges/radio/ptr175/freq-11000-set</p>
                        <v>10</v>
                    </quotient>
                </integer>
            </function>
            <output>systems/gauges/radio/ptr175/freq-10000-digit-A</output>
        </fcs_function>
        
        <linear_actuator name="systems/gauges/radio/ptr175/freq-10000-digit">
            <input>systems/gauges/radio/ptr175/freq-10000-digit-A</input>
            <module>10</module>
            <rate>0.5</rate>
            <lag>8.0</lag>
            <gain>1.0</gain>
        </linear_actuator>
        
        <fcs_function>
            <function>
                <integer>
                    <difference>
                        <p>systems/gauges/radio/ptr175/freq-11000-set</p>
                        <product>
                            <integer>
                                <quotient>
                                    <p>systems/gauges/radio/ptr175/freq-11000-set</p>
                                    <v>10</v>
                                </quotient>
                            </integer>
                            <v>10</v>
                        </product>
                    </difference>
                </integer>
            </function>
            <output>systems/gauges/radio/ptr175/freq-01000-digit-A</output>
        </fcs_function>
        
        <linear_actuator name="systems/gauges/radio/ptr175/freq-01000-digit">
            <input>systems/gauges/radio/ptr175/freq-01000-digit-A</input>
            <module>10</module>
            <rate>0.5</rate>
            <lag>8.0</lag>
            <gain>1.0</gain>
        </linear_actuator>
        
        <fcs_function>
            <function>
                <integer>
                    <p>systems/gauges/radio/ptr175/freq-00100-set</p>
                </integer>
            </function>
            <output>systems/gauges/radio/ptr175/freq-00100-digit-A</output>
        </fcs_function>
        
        <linear_actuator name="systems/gauges/radio/ptr175/freq-00100-digit">
            <input>systems/gauges/radio/ptr175/freq-00100-digit-A</input>
            <module>10</module>
            <rate>0.5</rate>
            <lag>8.0</lag>
            <gain>1.0</gain>
        </linear_actuator>

        <fcs_function>
            <function>
                <integer>
                    <quotient>
                        <p>systems/gauges/radio/ptr175/freq-00011-set</p>
                        <v>10</v>
                    </quotient>
                </integer>
            </function>
            <output>systems/gauges/radio/ptr175/freq-00010-digit-A</output>
        </fcs_function>

        <linear_actuator name="systems/gauges/radio/ptr175/freq-00010-digit">
            <input>systems/gauges/radio/ptr175/freq-00010-digit-A</input>
            <module>10</module>
            <rate>0.5</rate>
            <lag>8.0</lag>
            <gain>1.0</gain>
        </linear_actuator>

        <fcs_function>
            <function>
                <integer>
                    <difference>
                        <p>systems/gauges/radio/ptr175/freq-00011-set</p>
                        <product>
                            <integer>
                                <quotient>
                                    <p>systems/gauges/radio/ptr175/freq-00011-set</p>
                                    <v>10</v>
                                </quotient>
                            </integer>
                            <v>10</v>
                        </product>
                    </difference>
                </integer>
            </function>
            <output>systems/gauges/radio/ptr175/freq-00001-digit-A</output>
        </fcs_function>

        <linear_actuator name="systems/gauges/radio/ptr175/freq-00001-digit">
            <input>systems/gauges/radio/ptr175/freq-00001-digit-A</input>
            <module>10</module>
            <rate>0.5</rate>
            <lag>8.0</lag>
            <gain>1.0</gain>
        </linear_actuator>
        
    </channel>
    
</system>
