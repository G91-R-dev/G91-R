<?xml version="1.0"?>

<system name="Manual switches"> 
    
    <property value="0">systems/manual-switches/cockpit/sw-bus0-bus1-battery</property>
    <property value="0">systems/manual-switches/cockpit/sw-bus0-bus1-battery-trigger</property>
    <property value="0">systems/manual-switches/cockpit/sw-bus0-bus1-battery-pos</property>
    <property value="0">systems/manual-switches/cockpit/sw-internal-power-generator</property>
    <property value="0">systems/manual-switches/cockpit/sw-canopy-trigger</property>
    <property value="0">systems/manual-switches/cockpit/sw-canopy-pos</property>
    <property value="0">systems/manual-switches/cockpit/sw-canopy-togle</property>
    <property value="0">systems/manual-switches/jato/sw-ready-togle</property>
    <property value="0">systems/manual-switches/jato/sw-ignition-togle</property>
    <property value="0">systems/manual-switches/jato/sw-jettinson-togle</property>
    <property value="0">systems/manual-switches/cockpit/sw-landing-light</property>
    <property value="0">systems/manual-switches/cockpit/sw-beacon-light</property>
    
    
    <channel name="cockpit switchs" execrate="8">
        
        <!-- Battery bus 0 to bus 1 switch -->
        
        <lag_filter name="systems/manual-switches/cockpit/sw-bus0-bus1-battery-pos">
            <input>systems/manual-switches/cockpit/sw-bus0-bus1-battery-pos-status</input>
            <c1>8.0</c1>
        </lag_filter>
        
        <switch name="systems/manual-switches/cockpit/sw-bus0-bus1-battery-pos-status">
            <default value="systems/manual-switches/cockpit/sw-bus0-bus1-battery-pos-status"/>
            <test logic="AND" value="1">
                systems/manual-switches/cockpit/sw-bus0-bus1-battery-trigger == 1
            </test>
            <test logic="AND" value="-1">
                systems/manual-switches/cockpit/sw-bus0-bus1-battery-trigger == -1
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/cockpit/sw-bus0-bus1-battery-trigger == 0
                <test logic="OR">
                    systems/manual-switches/cockpit/sw-bus0-bus1-battery-pos GE 0.9
                    systems/manual-switches/cockpit/sw-bus0-bus1-battery-pos LE -0.9
                </test>
            </test>
        </switch>
        
        <!-- Canopy open-close switch -->
        
        <lag_filter name="systems/manual-switches/cockpit/sw-canopy-pos">
            <input>systems/manual-switches/cockpit/sw-canopy-pos-status</input>
            <c1>8.0</c1>
        </lag_filter>
        
        <switch name="systems/manual-switches/cockpit/sw-canopy-pos-status">
            <default value="systems/manual-switches/cockpit/sw-canopy-pos-status"/>
            <test logic="OR" value="1">
                systems/manual-switches/cockpit/sw-canopy-trigger == 1
                systems/manual-switches/cockpit/sw-canopy-togle-trigger == 1
            </test>
            <test logic="OR" value="-1">
                systems/manual-switches/cockpit/sw-canopy-trigger == -1
                systems/manual-switches/cockpit/sw-canopy-togle-trigger == -1
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/cockpit/sw-canopy-trigger == 0
                <test logic="OR">
                    systems/manual-switches/cockpit/sw-canopy-pos GE 0.9
                    systems/manual-switches/cockpit/sw-canopy-pos LE -0.9
                </test>
            </test>
        </switch>
        
        <switch name="systems/manual-switches/cockpit/sw-canopy">
            <default value="systems/manual-switches/cockpit/sw-canopy"/>
            <test logic="AND" value="1">
                systems/manual-switches/cockpit/sw-canopy-pos GE 0.9
                systems/canopy/lever-lock == 0
            </test>
            <test logic="AND" value="-1">
                systems/manual-switches/cockpit/sw-canopy-pos LE -0.9
                systems/canopy/lever-lock == 0
            </test>
        </switch>
        
        <switch name="systems/manual-switches/external/sw-canopy-pos-open">
            <default value="0"/>
            <test logic="AND" value="systems/manual-switches/cockpit/sw-canopy-pos">
                systems/manual-switches/cockpit/sw-canopy-pos GE 0.1
            </test>
        </switch>
        
        <switch name="systems/manual-switches/external/sw-canopy-pos-close">
            <default value="0"/>
            <test logic="AND" value="systems/manual-switches/cockpit/sw-canopy-pos">
                systems/manual-switches/cockpit/sw-canopy-pos LE -0.1
            </test>
        </switch>
        
        <switch name="systems/manual-switches/cockpit/sw-canopy-togle-trigger">
            <default value="0"/>
            <test logic="AND" value="-1">
                systems/manual-switches/cockpit/sw-canopy-togle == 1
                systems/manual-switches/cockpit/sw-canopy == 1
            </test>
            <test logic="AND" value="1">
                systems/manual-switches/cockpit/sw-canopy-togle == 1
                systems/manual-switches/cockpit/sw-canopy LE 0
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/cockpit/sw-canopy-togle == 0
            </test>
        </switch>
        
        <!-- JATO switch ready -->
        
        <washout_filter name="systems/manual-switches/jato/sw-ready-togle-washed">
            <input>systems/manual-switches/jato/sw-ready-togle</input>
            <c1>1.0</c1>
        </washout_filter>
        
        <switch name="systems/manual-switches/jato/sw-ready-togle-norm">
            <default value="1"/>
            <test logic="AND" value = "0">
                systems/manual-switches/jato/sw-ready-togle-washed LT 0.6
                systems/manual-switches/jato/sw-ready-togle-washed GT -0.6
            </test>
        </switch>
        
        <switch name="systems/manual-switches/jato/sw-ready-trigger">
            <default value="systems/manual-switches/jato/sw-ready-trigger"/>
            <test logic="AND" value="1">
                systems/manual-switches/jato/sw-ready-togle-norm == 1
                systems/manual-switches/jato/sw-ready-pos LE 0.05
                systems/manual-switches/jato/sw-ready-trigger == 0
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/jato/sw-ready-togle-norm == 1
                systems/manual-switches/jato/sw-ready-pos GE 0.95
                systems/manual-switches/jato/sw-ready-trigger == 1
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/jato/sw-ready-pos GE 0.8
                systems/jato/electric-active == 0
            </test>
        </switch>
        
        <lag_filter name="systems/manual-switches/jato/sw-ready-pos">
            <input>systems/manual-switches/jato/sw-ready-trigger</input>
            <c1>4.0</c1>
        </lag_filter>
        
        <switch name="systems/manual-switches/jato/sw-ready">
            <default value="0"/>
            <test logic="AND" value="1">
                systems/manual-switches/jato/sw-ready-trigger == 1
                systems/manual-switches/jato/sw-ready-pos GT 0.95
                systems/jato/electric-active == 1
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/jato/sw-ready-trigger == 0
                systems/manual-switches/jato/sw-ready-pos LE 0.95
            </test>
        </switch>
        
        <!-- JATO switch ignition -->
        
        <washout_filter name="systems/manual-switches/jato/sw-ignition-togle-washed">
            <input>systems/manual-switches/jato/sw-ignition-togle</input>
            <c1>1.0</c1>
        </washout_filter>
        
        <switch name="systems/manual-switches/jato/sw-ignition-togle-norm">
            <default value="1"/>
            <test logic="AND" value = "0">
                systems/manual-switches/jato/sw-ignition-togle-washed LT 0.6
                systems/manual-switches/jato/sw-ignition-togle-washed GT -0.6
            </test>
        </switch>
        
        <switch name="systems/manual-switches/jato/sw-ignition-trigger">
            <default value="systems/manual-switches/jato/sw-ignition-trigger"/>
            <test logic="AND" value="1">
                systems/manual-switches/jato/sw-ignition-togle-norm == 1
                systems/manual-switches/jato/sw-ignition-pos LE 0.05
                systems/manual-switches/jato/sw-ignition-trigger == 0
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/jato/sw-ignition-pos GT 0.95
            </test>
        </switch>
        
        <lag_filter name="systems/manual-switches/jato/sw-ignition-pos">
            <input>systems/manual-switches/jato/sw-ignition-trigger</input>
            <c1>4.0</c1>
        </lag_filter>
        
        <switch name="systems/manual-switches/jato/sw-ignition">
            <default value="0"/>
            <test logic="AND" value="1">
                systems/manual-switches/jato/sw-ignition-trigger == 1
                systems/manual-switches/jato/sw-ignition-pos GT 0.50
                systems/jato/electric-active == 1
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/jato/sw-ignition-trigger == 0
                systems/manual-switches/jato/sw-ignition-pos LE 0.50
            </test>
        </switch>
        
        <!-- JATO switch jettinson -->
        
        <washout_filter name="systems/manual-switches/jato/sw-jettinson-togle-washed">
            <input>systems/manual-switches/jato/sw-jettinson-togle</input>
            <c1>1.0</c1>
        </washout_filter>
        
        <switch name="systems/manual-switches/jato/sw-jettinson-togle-norm">
            <default value="1"/>
            <test logic="AND" value = "0">
                systems/manual-switches/jato/sw-jettinson-togle-washed LT 0.6
                systems/manual-switches/jato/sw-jettinson-togle-washed GT -0.6
            </test>
        </switch>
        
        <switch name="systems/manual-switches/jato/sw-jettinson-trigger">
            <default value="systems/manual-switches/jato/sw-jettinson-trigger"/>
            <test logic="AND" value="1">
                systems/manual-switches/jato/sw-jettinson-togle-norm == 1
                systems/manual-switches/jato/sw-jettinson-pos LE 0.05
                systems/manual-switches/jato/sw-jettinson-trigger == 0
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/jato/sw-jettinson-pos GT 0.95
            </test>
        </switch>
        
        <lag_filter name="systems/manual-switches/jato/sw-jettinson-pos">
            <input>systems/manual-switches/jato/sw-jettinson-trigger</input>
            <c1>4.0</c1>
        </lag_filter>
        
        <switch name="systems/manual-switches/jato/sw-jettinson">
            <default value="0"/>
            <test logic="AND" value="1">
                systems/manual-switches/jato/sw-jettinson-trigger == 1
                systems/manual-switches/jato/sw-jettinson-pos GT 0.50
                systems/jato/electric-active == 1
            </test>
            <test logic="AND" value="0">
                systems/manual-switches/jato/sw-jettinson-trigger == 0
                systems/manual-switches/jato/sw-jettinson-pos LE 0.50
            </test>
        </switch>
        
        <!-- lights -->
        
        <lag_filter name="systems/manual-switches/cockpit/sw-landing-light-pos">
            <input>systems/manual-switches/cockpit/sw-landing-light</input>
            <c1>8.0</c1>
        </lag_filter>
        
        <lag_filter name="systems/manual-switches/cockpit/sw-beacon-light-pos">
            <input>systems/manual-switches/cockpit/sw-beacon-light</input>
            <c1>8.0</c1>
        </lag_filter>
        
    </channel>
        
</system>
