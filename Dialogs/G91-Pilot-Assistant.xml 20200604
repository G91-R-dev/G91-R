<?xml version="1.0" encoding="ISO-8859-1"?>

<PropertyList>
    
    <name>pilot-assistant</name>
    <layout>vbox</layout>
    <default-padding>8</default-padding>
    <modal>false</modal>
    <width>1024</width>
    
    <!-- title bar -->
    <group>
        <layout>hbox</layout>
        <empty><stretch>true</stretch></empty>
        <text>
            <label>Pilot assistant</label>
        </text>
        <empty><stretch>true</stretch></empty>
        <button>
            <legend/>
            <key>Esc</key>
            <pref-width>16</pref-width>
            <pref-height>16</pref-height>
            <border>2</border>
            <binding>
                <command>dialog-close</command>
            </binding>
        </button>
    </group>
    
    <hrule/>
    
    <group>
        <layout>hbox</layout>
        <group>
            <!-- Heading -->
            <layout>vbox</layout>
            <group>
                <layout>hbox</layout>
                <group>
                    <layout>table</layout>
                    <checkbox>
                        <row>0</row>
                        <col>0</col>
                        <label>Heading Control</label>
                        <halign>fill</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/heading-control</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                        <binding>
                            <command>nasal</command>
                            <script>
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/heading-control") == 1.0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination",1.0);
                                }
                            </script>
                        </binding>
                    </checkbox>
                    <radio>
                        <row>0</row>
                        <col>1</col>
                        <label>Auto Coordination</label>
                        <property>fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </radio>
                </group>
            </group>
            <hrule/>
            <group>
                <layout>table</layout>
                <layout>table</layout>
                <text>
                    <label>Wings Level</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/wing-leveler</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                        </script>
                    </binding>
                </radio>
                <text>
                    <label>Maximum wing slope</label>
                    <halign>right</halign>
                    <row>1</row>
                    <col>0</col>
                </text>
                <input>
                    <row>1</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading-max-wing-slope-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>1</row>
                    <col>2</col>
                    <label>999999999999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/true-heading-turn-direction-versus-slope-sw-lag-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>1</row>
                    <col>3</col>
                    <label>999999999999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>R %2.1f (nm)</format>
                    <property>fdm/jsbsim/systems/autopilot/turn-radius-nm-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <label>True heading</label>
                    <halign>right</halign>
                    <row>2</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>2</row>
                    <col>2</col>
                    <label>999999999999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/heading-true-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>2</row>
                    <col>3</col>
                    <label>999999999999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>%3.2f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/true-heading-deg-delta</property>
                    <color>
                        <red>0.2</red>
                        <green>0.9</green>
                        <blue>0.2</blue>
                    </color>
                </text>
                <button>
                    <row>3</row>
                    <col>0</col>
                    <legend>Left - 5 (deg)</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg") == 0.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",math.round(getprop("fdm/jsbsim/systems/autopilot/heading-true-deg")));
                            }
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",math.round(0.5 + getprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg")) - 5);
                            var true_heading_deg = getprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg");
                            if (true_heading_deg >= 360.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",true_heading_deg - 360.0);
                            } else if (true_heading_deg < 0.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",360 - true_heading_deg);
                            } else {
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",true_heading_deg);
                            }
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination",1.0);
                        ]]></script>
                    </binding>
                </button>
                <button>
                    <row>3</row>
                    <col>1</col>
                    <legend>Set actual heading</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",math.round(getprop("fdm/jsbsim/systems/autopilot/heading-true-deg")));
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination",1.0);
                        </script>
                    </binding>
                </button>
                <button>
                    <row>3</row>
                    <col>2</col>
                    <legend>Right + 5 (deg)</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg") == 0.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",math.round(getprop("fdm/jsbsim/systems/autopilot/heading-true-deg")));
                            }
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",math.round(0.5 + getprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg")) + 5);
                            var true_heading_deg = getprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg");
                            if (true_heading_deg >= 360.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",true_heading_deg - 360.0);
                            } else if (true_heading_deg <= -360.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",360 - true_heading_deg);
                            } else {
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",true_heading_deg);
                            }
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination",1.0);
                        ]]></script>
                    </binding>
                </button>
                <text>
                    <label>PHI heading</label>
                    <halign>right</halign>
                    <row>4</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>4</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/phi-heading</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                        </script>
                    </binding>
                </radio>
                <text>
                    <row>4</row>
                    <col>2</col>
                    <label>99999</label>
                    <live>true</live>
                    <format>%3.2f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/phi-heading-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
            </group>
        </group>
        
        <vrule/>
        
        <group>
            <!-- Pitch/Altitude -->
            <layout>vbox</layout>
            <group>
                <layout>hbox</layout>
                <group>
                    <layout>table</layout>
                    <checkbox>
                        <row>0</row>
                        <col>0</col>
                        <label>Pitch/Altitude Control</label>
                        <halign>fill</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/altitude-active</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </checkbox>
                    <text>
                        <row>0</row>
                        <col>1</col>
                        <label>99999</label>
                        <halign>left</halign>
                        <live>true</live>
                        <format>%3.1f (elev)</format>
                        <property>fdm/jsbsim/fcs/pitch-deg</property>
                        <color>
                            <red>0.0</red>
                            <green>0.8</green>
                            <blue>0.0</blue>
                        </color>
                    </text>
                    <text>
                        <row>0</row>
                        <col>2</col>
                        <label>999999999999999</label>
                        <halign>left</halign>
                        <live>true</live>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-control-geo-is-nil</property>
                        <color>
                            <red>0.8</red>
                            <green>0.0</green>
                            <blue>0.0</blue>
                        </color>
                    </text>
                    <radio>
                        <row>1</row>
                        <col>0</col>
                        <label>Impact control</label>
                        <halign>left</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-control-active</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                        <binding>
                            <command>nasal</command>
                            <script><![CDATA[
                                var speed_cas = getprop("fdm/jsbsim/systems/autopilot/speed-cas-on-air");
                                if (speed_cas != nil and getprop("fdm/jsbsim/systems/autopilot/gui/impact-control-active") > 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/speed-control",1.0);
                                    if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas") == 1) {
                                        if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-value") < 250) {
                                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",250);
                                        }
                                    } else if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach") == 1) {
                                        if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-value") < 0.4) {
                                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",0.4);
                                        }
                                    } else if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph") == 1) {
                                        setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas",1);
                                        setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach",0);
                                        setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph",0);
                                        if (speed_cas < 250.0) {
                                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",250);
                                        } else {
                                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",math.round(speed_cas));
                                        }
                                    }
                                }
                            ]]></script>
                        </binding>
                    </radio>
                    <slider>
                        <row>1</row>
                        <col>1</col>
                        <name>impact_control_ramp_deg</name>
                        <halign>left</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-medium-time</property>
                        <min>10.0</min>
                        <max>60.0</max>
                        <step>1</step>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </slider>
                    <text>
                        <row>1</row>
                        <col>2</col>
                        <label>99999999</label>
                        <halign>left</halign>
                        <live>true</live>
                        <format>%1.1f (Advance)</format>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-medium-time</property>
                        <color>
                            <red>0.9</red>
                            <green>0.9</green>
                            <blue>0.0</blue>
                        </color>
                    </text>
                </group>
            </group>
            <hrule/>
            <group>
                <layout>table</layout>
                <text>
                    <label>Vertical Speed</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/vertical-speed</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/pitch-alpha",0.0);
                            } else {
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle") == 0 and
                                getprop("fdm/jsbsim/systems/autopilot/gui/pitch-alpha") == 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle",1.0);
                                }
                            }
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>0</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/vertical-speed-fpm</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>0</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%4.0f (fpm)</format>
                    <property>fdm/jsbsim/systems/autopilot/v-up-fpm-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>0</row>
                    <col>4</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>[%4.0f]</format>
                    <property>fdm/jsbsim/systems/autopilot/vertical-speed-fpm</property>
                    <color>
                        <red>0.8</red>
                        <green>0.8</green>
                        <blue>0.8</blue>
                    </color>
                </text>
                <text>
                    <label>Slope angle</label>
                    <halign>right</halign>
                    <row>2</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-angle</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/pitch-alpha",0.0);
                            } else {
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle") == 0 and
                                getprop("fdm/jsbsim/systems/autopilot/gui/pitch-alpha") == 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed",1.0);
                                }
                            }
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>2</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-angle-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>2</row>
                    <col>3</col>
                    <label>9999999999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%3.2f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/pitch-angle-absolute-deg-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>2</row>
                    <col>4</col>
                    <label>9999999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>[%3.2f]</format>
                    <property>fdm/jsbsim/systems/autopilot/pitch-angle-deg</property>
                    <color>
                        <red>0.8</red>
                        <green>0.8</green>
                        <blue>0.8</blue>
                    </color>
                </text>
                <text>
                    <label>Alpha angle</label>
                    <halign>right</halign>
                    <row>3</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>3</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-alpha</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-alpha") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/altitude-QFE",0.0)
                            } else {
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed") == 0 and
                                getprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle") == 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed",1.0);
                                }
                            }
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>3</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-alpha-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>3</row>
                    <col>3</col>
                    <label>9999999999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%3.2f (deg)</format>
                    <property>fdm/jsbsim/aero/alpha-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <label>Altitude Hold</label>
                    <halign>right</halign>
                    <row>4</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>4</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-hold</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/altitude-QFE",0.0);
                            }
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>4</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-hold-ft</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>4</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%5.0f (ft)</format>
                    <property>fdm/jsbsim/systems/autopilot/h-sl-ft-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>4</row>
                    <col>4</col>
                    <label>9</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>[%5.0f]</format>
                    <property>fdm/jsbsim/systems/autopilot/altitude-hold-ft</property>
                    <color>
                        <red>0.8</red>
                        <green>0.8</green>
                        <blue>0.8</blue>
                    </color>
                </text>
                <text>
                    <label>Altitude QFE</label>
                    <halign>right</halign>
                    <row>5</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>5</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-QFE</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/altitude-QFE") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/pitch-alpha",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/impact-control-active",1.0);
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle") > 0.5) {
                                    if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle-deg") < 6.0) {
                                        setprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle-deg",6.0);
                                    }
                                } else if (getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed") > 0.5) {
                                    if (getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed-fpm") < 2500.0) {
                                        setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed-fpm",2500.0);
                                    }
                                } else {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle",1.0);
                                    if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle-deg") < 6.0) {
                                        setprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle-deg",6.0);
                                    }
                                }
                            }
                        ]]></script>
                    </binding>
                </radio>
                <input>
                    <row>5</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-QFE-ft</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/altitude-QFE-ft") < 150.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/altitude-QFE-ft",200.0);
                            }
                        ]]></script>
                    </binding>
                </input>
                <text>
                    <row>5</row>
                    <col>3</col>
                    <label>999999999999999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>QFE %5.0f (ft)</format>
                    <property>/position/altitude-agl-ft</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>5</row>
                    <col>4</col>
                    <label>9999999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>[%5.0f]</format>
                    <property>fdm/jsbsim/systems/autopilot/altitude-QFE-ft-mod</property>
                    <color>
                        <red>0.8</red>
                        <green>0.8</green>
                        <blue>0.8</blue>
                    </color>
                </text>
                <text>
                    <row>5</row>
                    <col>5</col>
                    <label>999999999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <property>fdm/jsbsim/systems/autopilot/altitude-QFE-set-active-text</property>
                    <color>
                        <red>1</red>
                        <green>1</green>
                        <blue>1</blue>
                    </color>
                </text>
                <button>
                    <row>6</row>
                    <col>0</col>
                    <legend>Set altitude</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-active",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold-ft",math.round(getprop("fdm/jsbsim/systems/autopilot/h-sl-ft-lag")));
                            setprop("fdm/jsbsim/systems/autopilot/gui/impact-control-active",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-QFE",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle-deg",6.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-control",1.0);
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed") == 0 and 
                                getprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle") == 0 and 
                                getprop("fdm/jsbsim/systems/autopilot/gui/pitch-alpha") == 0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed",1);
                                if (math.abs(getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed-fpm")) < 100.0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed-fpm",500.0);
                                }
                            }
                        ]]></script>
                    </binding>
                </button>
                <text>
                    <row>6</row>
                    <col>2</col>
                    <label>9999999999999999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>Diff. %5.0f (ft)</format>
                    <property>fdm/jsbsim/systems/autopilot/altitude-selected-ft-dif</property>
                    <color>
                        <red>0.8</red>
                        <green>0.8</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>6</row>
                    <col>3</col>
                    <label>999999999999</label>
                    <halign>right</halign>
                    <live>true</live>
                    <format>Alt. Ter. %5.0f (ft)</format>
                    <property>fdm/jsbsim/systems/autopilot/altitude-alt-terrain</property>
                    <color>
                        <red>0.8</red>
                        <green>0.8</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>6</row>
                    <col>4</col>
                    <label>99999999999999999999</label>
                    <halign>right</halign>
                    <live>true</live>
                    <format>    Bias h %5.0f (ft)</format>
                    <property>fdm/jsbsim/systems/autopilot/gui/impact-min-z-ft-mod</property>
                    <color>
                        <red>0.0</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
            </group>
        </group>
    </group>
    
    <hrule/>
    
    <!-- Speed contrl -->
    <group>
        <layout>vbox</layout>
        <group>
            <layout>hbox</layout>
            <group>
                <layout>table</layout>
                <checkbox>
                    <row>0</row>
                    <col>0</col>
                    <label>Speed Control</label>
                    <halign>fill</halign>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-control</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-control") == 1.0 and
                            getprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle") == 0.0 and
                            getprop("fdm/jsbsim/systems/autopilot/gui/speed-pitch") == 0.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle",1.0);
                            }
                        </script>
                    </binding>
                </checkbox>
                <text>
                    <label>Speed by throttle</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>1</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-throttle</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-pitch",0.0);
                            } else {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-pitch",1.0);
                            }
                        ]]></script>
                    </binding>
                </radio>
                <text>
                    <label>Speed by pitch</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>3</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>4</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-pitch</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-pitch") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/pitch-angle",0.0);
                            } else {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle",1.0);
                            }
                        ]]></script>
                    </binding>
                </radio>
                <text>
                    <label>Control with speed-brake</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>5</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>6</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-automatic-brake</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
                <text>
                    <label>Automatic flap</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>7</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>8</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-automatic-flap</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
                <text>
                    <label>Automatic gear</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>9</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>10</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-automatic-gear</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
            </group>
        </group>
        <hrule/>
        <group>
            <layout>table</layout>
            <text>
                <label>Speed control</label>
                <halign>left</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <radio>
                <row>0</row>
                <col>1</col>
                <label>TAS</label>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-set-mph</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script><![CDATA[
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph") == 1) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",math.round(getprop("fdm/jsbsim/systems/autopilot/speed-true-on-air")));
                        }
                    ]]></script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>2</col>
                <label>CAS</label>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-set-cas</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script><![CDATA[
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas") == 1) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",math.round(getprop("fdm/jsbsim/systems/autopilot/speed-cas-on-air")));
                        }
                    ]]></script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>3</col>
                <label>Mach</label>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-set-mach</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script><![CDATA[
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach") == 1) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",sprintf("%1.2f",getprop("fdm/jsbsim/systems/autopilot/speed-mach-on-air")));
                        }
                    ]]></script>
                </binding>
            </radio>
            <input>
                <row>0</row>
                <col>4</col>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-value</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script><![CDATA[
                        setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-best-by-altitude",0.0);
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-value") < 2.0) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach",1.0);
                        } else {
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach") == 1.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas",1.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach",0.0);
                            }
                        }
                    ]]></script>
                </binding>
            </input>
            <radio>
                <row>0</row>
                <col>5</col>
                <label>Optimize</label>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-set-best-by-altitude</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <text>
                <row>0</row>
                <col>6</col>
                <label>9999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>[%3.2f]</format>
                <property>fdm/jsbsim/systems/autopilot/speed-value-target-lag</property>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.8</blue>
                </color>
            </text>
            <text>
                <label>TAS</label>
                <halign>right</halign>
                <row>0</row>
                <col>7</col>
            </text>
            <text>
                <row>0</row>
                <col>8</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-true-on-air</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>CAS</label>
                <halign>right</halign>
                <row>0</row>
                <col>9</col>
            </text>
            <text>
                <row>0</row>
                <col>10</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-cas-on-air</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Mach</label>
                <halign>right</halign>
                <row>0</row>
                <col>11</col>
            </text>
            <text>
                <row>0</row>
                <col>12</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%1.3f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-mach-on-air</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>On ground</label>
                <halign>right</halign>
                <row>0</row>
                <col>13</col>
            </text>
            <text>
                <row>0</row>
                <col>14</col>
                <label>99999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f (fps)</format>
                <property>fdm/jsbsim/systems/autopilot/velocity-on-ground-mph-lag</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
        </group>
        <hrule/>
        <group>
            <layout>table</layout>
            <text>
                <label>Total fuel (lbs)</label>
                <halign>left</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <text>
                <row>0</row>
                <col>1</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.1f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-total-lbs</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Flow rate (lb/hr)</label>
                <halign>left</halign>
                <row>0</row>
                <col>2</col>
            </text>
            <text>
                <row>0</row>
                <col>3</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-flow-rate-lbhr</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Fuel remain (%)</label>
                <halign>left</halign>
                <row>0</row>
                <col>4</col>
            </text>
            <text>
                <row>0</row>
                <col>5</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-remain-percent</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Dropp. Fuel (lbr)</label>
                <halign>left</halign>
                <row>0</row>
                <col>6</col>
            </text>
            <text>
                <row>0</row>
                <col>7</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-droppable-remain-lbs</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>8</col>
                <label>Drop tank pressure auto</label>
                <property>fdm/jsbsim/systems/autopilot/fuel-droppable-auto</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
        </group>
        
        <hrule/>
        
        <group>
            <layout>table</layout>
            <text>
                <label>Trust (lbs)</label>
                <halign>left</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <text>
                <row>0</row>
                <col>1</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.1f</format>
                <property>fdm/jsbsim/propulsion/engine/thrust-lbs</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>2</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>(%1.2f)</format>
                <property>fdm/jsbsim/systems/autopilot/thrust-weight-ratio</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Throttle n1 (%)</label>
                <halign>left</halign>
                <row>0</row>
                <col>3</col>
            </text>
            <slider>
                <row>0</row>
                <col>4</col>
                <name>Throttle power</name>
                <live>true</live>
                <property>controls/engines/engine/throttle</property>
                <min>0.0</min>
                <max>1.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>5</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/propulsion/engine/n2</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Fuel/Thrust</label>
                <halign>left</halign>
                <row>0</row>
                <col>6</col>
            </text>
            <text>
                <row>0</row>
                <col>7</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%1.2f</format>
                <property>fdm/jsbsim/systems/autopilot/propulsion-specific-con</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Time res. (s)</label>
                <halign>left</halign>
                <row>0</row>
                <col>8</col>
            </text>
            <text>
                <row>0</row>
                <col>9</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.0f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-time-residue-sec</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Distance res. (nm)</label>
                <halign>left</halign>
                <row>0</row>
                <col>10</col>
            </text>
            <text>
                <row>0</row>
                <col>11</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.0f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-nm-residue</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Lib/nm</label>
                <halign>left</halign>
                <row>0</row>
                <col>12</col>
            </text>
            <text>
                <row>0</row>
                <col>13</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-lbs-formiles</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
        </group>
        
        <hrule/>
        
        <group>
            <layout>table</layout>
            <button>
                <row>0</row>
                <col>0</col>
                <pref-width>90</pref-width>
                <legend>  Take off </legend>
                <halign>fill</halign>
                <live>true</live>
                <binding>
                    <command>nasal</command>
                    <script>
                        if (getprop("/sim/presets/onground")) {
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/take-off-activate") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/take-off-activate",0);
                            } else {
                                setprop("fdm/jsbsim/systems/autopilot/gui/take-off-activate",1);
                            }
                        } else {
                            setprop("fdm/jsbsim/systems/autopilot/gui/take-off-activate",0);
                        }
                    </script>
                </binding>
            </button>
            <text>
                <row>0</row>
                <col>1</col>
                <label>9999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>[% 2.1f] </format>
                <property>fdm/jsbsim/systems/autopilot/gui/landig-status-id</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>2</col>
                <label>999999999999999999999999999999999999999999999</label>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-status</property>
                <live>true</live>
                <halign>left</halign>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>3</col>
                <label>Jato</label>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-jato-active</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>4</col>
                <label>Altitude top</label>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-altitude-top-active</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <input>
                <row>0</row>
                <col>5</col>
                <pref-width>60</pref-width>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-altitude-top</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <radio>
                <row>0</row>
                <col>6</col>
                <label>Heading to</label>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-to-heading-active</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <input>
                <row>0</row>
                <col>7</col>
                <pref-width>40</pref-width>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-to-heading</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <radio>
                <row>0</row>
                <col>8</col>
                <label>Cruise speed</label>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-cruise-speed-active</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <input>
                <row>0</row>
                <col>9</col>
                <pref-width>40</pref-width>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-cruise-speed</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            
        </group>
        
        <hrule/>
        
        <group>
            <layout>table</layout>
            <button>
                <row>0</row>
                <col>0</col>
                <pref-width>100</pref-width>
                <legend>PHI Route</legend>
                <halign>fill</halign>
                <live>true</live>
                <binding>
                    <command>property-toggle</command>
                    <property>fdm/jsbsim/systems/gauges/PHI/program/route-manager/autopush-prepare-active</property>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        <![CDATA[
                            var heading_true_deg = math.round(getprop("fdm/jsbsim/systems/autopilot/heading-true-deg"));
                            if (getprop("fdm/jsbsim/systems/gauges/PHI/program/route-manager/autopush-prepare-active") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-max-wing-slope-deg",45.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",1.0);
                                setprop("fdm/jsbsim/systems/gauges/PHI/wind/automatic-wind-sw",1.0);
                                setprop("fdm/jsbsim/systems/gauges/PHI/doppler/switch-turn",2.0);
                                setprop("fdm/jsbsim/systems/gauges/PHI/indicator/switch-turn",1.0);
                                setprop("fdm/jsbsim/systems/gauges/PHI/program/route-manager/autopush-next",-1);
                                setprop("fdm/jsbsim/systems/gauges/PHI/program/route-manager/autopush-active",1);
                            } else {
                                setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                                setprop("fdm/jsbsim/systems/gauges/PHI/program/route-manager/autopush-active",0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",heading_true_deg);
                                setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                                setprop("fdm/jsbsim/systems/gauges/PHI/program/route-manager/autopush-next",-2.0);
                            }
                        ]]>
                    </script>
                </binding>
            </button>
            <text>
                <row>0</row>
                <col>1</col>
                <label>9999999</label>
                <live>true</live>
                <format>%2.0f | </format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/status</property>
                <halign>left</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>2</col>
                <label>99999999999999</label>
                <live>true</live>
                <format>%3.0f (nm) |</format>
                <property>fdm/jsbsim/systems/gauges/PHI/indicator/mil-digit</property>
                <halign>center</halign>
                <color>
                    <red>1.0</red>
                    <green>1.0</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>3</col>
                <label>R1</label>
                <halign>right</halign>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[1]/isPush</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <text>
                <row>0</row>
                <col>4</col>
                <label>9999</label>
                <live>true</live>
                <format>%3.0f</format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[1]/dist</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>5</col>
                <label>999999</label>
                <live>true</live>
                <format>%3.0f | </format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[1]/phi</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>6</col>
                <label>R2</label>
                <halign>right</halign>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[2]/isPush</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <text>
                <row>0</row>
                <col>7</col>
                <label>9999</label>
                <live>true</live>
                <format>%3.0f</format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[2]/dist</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>8</col>
                <label>999999</label>
                <live>true</live>
                <format>%3.0f | </format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[2]/phi</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>9</col>
                <label>R3</label>
                <halign>right</halign>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[3]/isPush</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <text>
                <row>0</row>
                <col>10</col>
                <label>9999</label>
                <live>true</live>
                <format>%3.0f</format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[3]/dist</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>11</col>
                <label>999999</label>
                <live>true</live>
                <format>%3.0f | </format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[3]/phi</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>12</col>
                <label>R4</label>
                <halign>right</halign>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[4]/isPush</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <text>
                <row>0</row>
                <col>13</col>
                <label>9999</label>
                <live>true</live>
                <format>%3.0f</format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[4]/dist</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>14</col>
                <label>999999</label>
                <live>true</live>
                <format>%3.0f | </format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[4]/phi</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>15</col>
                <label>R5</label>
                <halign>right</halign>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[5]/isPush</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <text>
                <row>0</row>
                <col>16</col>
                <label>9999</label>
                <live>true</live>
                <format>%3.0f</format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[5]/dist</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>17</col>
                <label>999999</label>
                <live>true</live>
                <format>%3.0f | </format>
                <property>fdm/jsbsim/systems/gauges/PHI/program/route[5]/phi</property>
                <halign>center</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>18</col>
                <label>9999999999999</label>
                <live>true</live>
                <format>Wind dir: %3.0f</format>
                <property>fdm/jsbsim/systems/gauges/PHI/wind/wd</property>
                <halign>left</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>19</col>
                <label>99999999999</label>
                <live>true</live>
                <format>speed: %3.0f</format>
                <property>fdm/jsbsim/systems/gauges/PHI/wind/ws</property>
                <halign>left</halign>
                <color>
                    <red>0.8</red>
                    <green>0.8</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>20</col>
                <label>Dop.</label>
                <halign>center</halign>
                <property>fdm/jsbsim/systems/gauges/PHI/doppler/switch-turn</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        <![CDATA[
                            var tag = getprop("fdm/jsbsim/systems/gauges/PHI/doppler/switch-turn");
                            if (tag <= 1) {
                                setprop("fdm/jsbsim/systems/gauges/PHI/doppler/switch-turn",0);
                            } else {
                                setprop("fdm/jsbsim/systems/gauges/PHI/doppler/switch-turn",2);
                            }
                        ]]>
                    </script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>21</col>
                <halign>left</halign>
                <label>Sea/Land</label>
                <property>fdm/jsbsim/systems/gauges/PHI/doppler/switch-terrain-sea</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
        </group>
        
        <hrule/>
        
        <group>
            <!-- Autolanding Airport selector -->
            <layout>table</layout>
            <button>
                <row>0</row>
                <col>0</col>
                <pref-width>90</pref-width>
                <legend>Auto landing</legend>
                <halign>fill</halign>
                <live>true</live>
                <binding>
                    <command>nasal</command>
                    <script>
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/landing-activate") == 0) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/landing-activate",1);
                        } else {
                            setprop("fdm/jsbsim/systems/autopilot/gui/landing-activate",0);
                        }
                    </script>
                </binding>
            </button>
            <radio>
                <row>0</row>
                <col>1</col>
                <label>Active</label>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-activate-status</property>
                <live>true</live>
            </radio>
            <radio>
                <row>0</row>
                <col>2</col>
                <label>Nearest RW</label>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_nearest_runway</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>3</col>
                <label>Short prof</label>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-short-profile</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <text>
                <row>0</row>
                <col>4</col>
                <label>Min len:</label>
                <halign>left</halign>
            </text>
            <slider>
                <row>0</row>
                <col>5</col>
                <pref-width>50</pref-width>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-minimal-length-m</property>
                <min>1000.0</min>
                <max>3000.0</max>
                <step>1</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/landing-minimal-length-m") > 2000) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/landing-short-profile",0);
                        } else {
                            setprop("fdm/jsbsim/systems/autopilot/gui/landing-short-profile",1);
                        }
                    </script>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>6</col>
                <label>9999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.0f (m)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-minimal-length-m</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>7</col>
                <label>Scan</label>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-scan-airport</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <text>
                <row>0</row>
                <col>8</col>
                <label>Direct id:</label>
                <halign>left</halign>
            </text>
            <input>
                <row>0</row>
                <col>9</col>
                <pref-width>55</pref-width>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_select_name_direct</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/landing-scan-airport",0);
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/airport_select_id_direct/status") == 0) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/airport_select_id_direct/status",1);
                        }
                    </script>
                </binding>
            </input>
            <text>
                <row>0</row>
                <col>10</col>
                <label>999999999999999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_select_name_direct_extended</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <combo>
                <row>0</row>
                <col>11</col>
                <pref-width>130</pref-width>
                <halign>left</halign>
                <name>rw-selector</name>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_select_id_direct/rw</property>
                <editable>false</editable>
                <properties>fdm/jsbsim/systems/autopilot/gui/airport_select_id_direct/rws</properties>
                <binding>
                    <command>dialog-apply</command>
                    <object-name>rw-selector</object-name>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/airport_select_id_direct/rw_select",1);
                    </script>
                </binding>
            </combo>
        </group>
        
        <group>
            <!-- Autolanding status -->
            <layout>table</layout>
            <text>
                <row>0</row>
                <col>0</col>
                <label>9999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>[% 2.1f] </format>
                <property>fdm/jsbsim/systems/autopilot/gui/landig-status-id</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>1</col>
                <label>9999999999999999999999999999999999999999999999999999999</label>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_landing_status</property>
                <live>true</live>
                <halign>left</halign>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>2</col>
                <label>9999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Dist. %3.1f (nm)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_runway_distance</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>3</col>
                <label>9999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Delta %5.0f (ft)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_runway_delta_altitude</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>4</col>
                <label>999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Head %3.0f (deg)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_runway_airplane_heading_correct</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>5</col>
                <label>999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Slope %2.1f (deg)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_runway_airplane_slope</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
        </group>
            
        <group>
            <!-- Autolanding parameters -->
            <layout>table</layout>
            <text>
                <row>0</row>
                <col>0</col>
                <label>Hovering distance:</label>
                <halign>left</halign>
            </text>
            <slider>
                <row>0</row>
                <col>1</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-dist-nm</property>
                <min>5.0</min>
                <max>30.0</max>
                <step>1</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        var dist = getprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-dist-nm");
                        var elev = getprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-h-ft");
                        setprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-slope",math.atan((elev/6076.12)/dist)*R2D);
                    </script>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>2</col>
                <label>9999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.0f (nm)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-dist-nm</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>3</col>
                <label>Hovering alt:</label>
                <halign>left</halign>
            </text>
            <slider>
                <row>0</row>
                <col>4</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-h-ft</property>
                <min>3000.0</min>
                <max>10000.0</max>
                <step>500</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        var dist = getprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-dist-nm");
                        var elev = getprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-h-ft");
                        setprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-slope",math.atan((elev/6076.12)/dist)*R2D);
                    </script>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>5</col>
                <label>9999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%5.0f (ft)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-h-ft</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>6</col>
                <halign>left</halign>
                <label>Start landing slope:</label>
            </text>
            <text>
                <row>0</row>
                <col>7</col>
                <label>9999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.1f (deg)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-slope</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
        </group>
    
        
        <!-- PID configurator -->
        
        <!--
            The PID configurator is defined by: Ziegler–Nichols method
            https://en.wikipedia.org/wiki/Ziegler%E2%80%93Nichols_method
            With the four variants:
            Zingler-Nichols Classic
            Possen Integral Rule
            Some Overshoot
            No Overshoot
        -->
<!--
        <hrule/>
        
        <group>
            <layout>table</layout>
            <radio>
                <row>0</row>
                <col>0</col>
                <label>Zingler-Nichols Classic</label>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-czn</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-pir",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-so",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-no",0.0);
                    </script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>1</col>
                <label>Possen Integral Rule</label>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-pir</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-czn",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-so",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-no",0.0);
                    </script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>2</col>
                <label>Some Overshoot</label>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-so</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-czn",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-pir",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-no",0.0);
                    </script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>3</col>
                <label>No Overshoot</label>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-no</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-czn",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-pir",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-so",0.0);
                    </script>
                </binding>
            </radio>
        </group>
        <group>
            <layout>table</layout>
            <text>
                <label>Ku</label>
                <halign>left</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <slider>
                <row>0</row>
                <col>2</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-ku</property>
                <min>0.0</min>
                <max>10.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>3</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-ku</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <label>Tu</label>
                <halign>left</halign>
                <row>0</row>
                <col>4</col>
            </text>
            <slider>
                <row>0</row>
                <col>5</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-tu</property>
                <min>0.0</min>
                <max>10</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>6</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-tu</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <button>
                <row>0</row>
                <col>7</col>
                <legend>Calculate</legend>
                <halign>fill</halign>
                <live>true</live>
                <binding>
                    <command>nasal</command>
                    <script><![CDATA[
                        var ku = getprop("fdm/jsbsim/systems/autopilot/gui/pid-ku");
                        var tu = getprop("fdm/jsbsim/systems/autopilot/gui/pid-tu");
                        var kp = 0.0;
                        var ki = 0.0;
                        var kd = 0.0;
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/pid-pir") == 1) {
                            kp = 0.7 * ku;
                            if (tu > 0.01) {
                                ki = 1.75 * ku / tu;
                                kd = 21.0 * (ku / tu) / 200.0;
                            }
                        } else if (getprop("fdm/jsbsim/systems/autopilot/gui/pid-so") == 1) {
                            kp = 0.33 * ku;
                            if (tu > 0.01) {
                                ki = 0.666 * ku / tu;
                                kd = 0.1 * (ku / tu);
                            }
                        } else if (getprop("fdm/jsbsim/systems/autopilot/gui/pid-no") == 1) {
                            kp = 0.2 * ku;
                            if (tu > 0.01) {
                                ki = (2.0/5.0) * ku / tu;
                                kd = (ku / tu) / 15.0;
                            }
                        } else {
                            kp = 0.6 * ku;
                            if (tu > 0.01) {
                                ki = 1.2 * ku / tu;
                                kd = 3.0 * (ku / tu) / 40.0;
                            }
                        }
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-kp",kp);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-ki",ki);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-kd",kd);
                        # Modifiy data part
                        setprop("fdm/jsbsim/systems/autopilot/speed-kp",kp);
                        setprop("fdm/jsbsim/systems/autopilot/speed-ki",ki);
                        setprop("fdm/jsbsim/systems/autopilot/speed-kd",kd);
                    ]]></script>
                </binding>
            </button>
            <text>
                <label>Kp</label>
                <halign>left</halign>
                <row>0</row>
                <col>8</col>
            </text>
            <text>
                <row>0</row>
                <col>9</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-kp</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Ki</label>
                <halign>left</halign>
                <row>0</row>
                <col>10</col>
            </text>
            <text>
                <row>0</row>
                <col>11</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.4f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-ki</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Kd</label>
                <halign>left</halign>
                <row>0</row>
                <col>12</col>
            </text>
            <text>
                <row>0</row>
                <col>13</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.5f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-kd</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
        </group>
-->
        
        <hrule/>
        
        <group>
            <layout>table</layout>
            
            <text>
                <label>Pitch angle</label>
                <halign>left</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <slider>
                <row>0</row>
                <col>1</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/pitch-angle-pid-kp-set</property>
                <min>0</min>
                <max>10.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>2</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Kp %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/pitch-angle-pid-kp-set</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>0</row>
                <col>3</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/pitch-angle-pid-ki-set</property>
                <min>0</min>
                <max>10.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>4</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Ki %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/pitch-angle-pid-ki-set</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>0</row>
                <col>5</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/pitch-angle-pid-kd-set</property>
                <min>0</min>
                <max>80.0</max>
                <step>0.1</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>6</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Kd %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/pitch-angle-pid-kd-set</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>0</row>
                <col>8</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/pitch-output-coefficient</property>
                <min>-0.2</min>
                <max>0.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>9</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Gain %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/pitch-output-coefficient-mod</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            
            <text>
                <label>Vertical speed</label>
                <halign>left</halign>
                <row>1</row>
                <col>0</col>
            </text>
            <slider>
                <row>1</row>
                <col>1</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-kp-set</property>
                <min>0.0</min>
                <max>10.0</max>
                <step>0.1</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>1</row>
                <col>2</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>kp %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-kp-set</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>1</row>
                <col>3</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-ki-set</property>
                <min>0.0</min>
                <max>10.0</max>
                <step>0.1</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>1</row>
                <col>4</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>ki %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-ki-set</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>1</row>
                <col>5</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-kd-set</property>
                <min>0.0</min>
                <max>10.0</max>
                <step>0.1</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>1</row>
                <col>6</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>kd %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-kd-set</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>1</row>
                <col>8</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/vertical-speed-output-error-coefficient</property>
                <min>-1.0</min>
                <max>1.0</max>
                <step>0.05</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>1</row>
                <col>9</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Gain %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/vertical-speed-output-error-coefficient</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            
            <text>
                <label>Throttle</label>
                <halign>left</halign>
                <row>2</row>
                <col>0</col>
            </text>
            <slider>
                <row>2</row>
                <col>1</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/speed-throttle-pid-ku</property>
                <min>0.0</min>
                <max>50.0</max>
                <step>0.1</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>2</row>
                <col>2</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Ku %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-throttle-pid-ku</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>2</row>
                <col>3</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/speed-throttle-pid-tu</property>
                <min>0.0</min>
                <max>40.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>2</row>
                <col>4</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Tu %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-throttle-pid-tu</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <row>2</row>
                <col>5</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Kp %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-throttle-pid-kp</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <row>2</row>
                <col>6</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>ki %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-throttle-pid-ki</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <row>2</row>
                <col>7</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>kd %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-throttle-pid-kd</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>2</row>
                <col>8</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/speed-throttle-output-gain</property>
                <min>-0.1</min>
                <max>0.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>2</row>
                <col>9</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Gain %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-throttle-output-gain</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            
            <text>
                <label>Alt. hold</label>
                <halign>left</halign>
                <row>3</row>
                <col>0</col>
            </text>
            <slider>
                <row>3</row>
                <col>1</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/altitude-hold-pid-kp</property>
                <min>0.0</min>
                <max>5.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>3</row>
                <col>2</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>kp %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/altitude-hold-pid-kp</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>3</row>
                <col>3</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/altitude-hold-pid-ki</property>
                <min>0.0</min>
                <max>1.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>3</row>
                <col>4</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>ki %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/altitude-hold-pid-ki</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>3</row>
                <col>5</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/altitude-hold-pid-kd</property>
                <min>0.0</min>
                <max>20.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>3</row>
                <col>6</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>kd %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/altitude-hold-pid-kd</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>3</row>
                <col>8</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/altitude-hold-output-gain</property>
                <min>-2.0</min>
                <max>2.0</max>
                <step>0.05</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>3</row>
                <col>9</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Gain %2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/altitude-hold-output-gain</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            
            <text>
                <label>Landig PID</label>
                <halign>left</halign>
                <row>4</row>
                <col>0</col>
            </text>
            <slider>
                <row>4</row>
                <col>1</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/landing-PID-kp</property>
                <min>0</min>
                <max>10.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>4</row>
                <col>2</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Kp %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/landing-PID-kp</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>4</row>
                <col>3</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/landing-PID-ki</property>
                <min>0</min>
                <max>10.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>4</row>
                <col>4</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Ki %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/landing-PID-ki</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>4</row>
                <col>5</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/landing-PID-kd</property>
                <min>0</min>
                <max>10.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>4</row>
                <col>6</col>
                <label>99999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Kd %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/landing-PID-kd</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <slider>
                <row>4</row>
                <col>8</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/landing-PID-gain</property>
                <min>0</min>
                <max>2.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>4</row>
                <col>9</col>
                <label>9999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Gain %2.2f</format>
                <property>fdm/jsbsim/systems/autopilot/landing-PID-gain</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
        </group>

    </group>

</PropertyList>
