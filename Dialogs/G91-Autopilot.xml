<?xml version="1.0" encoding="ISO-8859-1"?>

<PropertyList>
    
    <name>PHI_Autopilot</name>
    <layout>vbox</layout>
    <default-padding>8</default-padding>
    <modal>false</modal>
    <width>900</width>
    
    <!-- title bar -->
    <group>
        <layout>hbox</layout>
        <empty><stretch>true</stretch></empty>
        <text>
            <label>Pilot assistant</label>
        </text>
        <empty><stretch>true</stretch></empty>
        <button>
            <legend/>
            <key>Esc</key>
            <pref-width>16</pref-width>
            <pref-height>16</pref-height>
            <border>2</border>
            <binding>
                <command>dialog-close</command>
            </binding>
        </button>
    </group>
    
    <hrule/>
    
    <group>
        <layout>hbox</layout>
        <group>
            <!-- Heading -->
            <layout>vbox</layout>
            <group>
                <layout>hbox</layout>
                <group>
                    <layout>table</layout>
                    <checkbox>
                        <row>0</row>
                        <col>0</col>
                        <label>Heading Control</label>
                        <halign>fill</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/heading-control</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </checkbox>
                    <radio>
                        <row>0</row>
                        <col>1</col>
                        <label>Auto Coordination</label>
                        <property>fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </radio>
                </group>
            </group>
            <hrule/>
            <group>
                <layout>table</layout>
                <layout>table</layout>
                <text>
                    <label>Wings Level</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/wing-leveler</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                        </script>
                    </binding>
                </radio>
                <text>
                    <label>Maximum wing slope</label>
                    <halign>right</halign>
                    <row>1</row>
                    <col>0</col>
                </text>
                <input>
                    <row>1</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading-max-wing-slope-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>1</row>
                    <col>3</col>
                    <label>99999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/true-heading-turn-direction-versus-slope-sw-lag-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <text>
                    <label>True heading</label>
                    <halign>right</halign>
                    <row>2</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>2</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>2</row>
                    <col>3</col>
                    <label>99999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>%3.1f</format>
                    <property>fdm/jsbsim/systems/autopilot/heading-true-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <text>
                    <row>2</row>
                    <col>4</col>
                    <label>99999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>[%3.2f] (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/true-heading-deg-delta</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <button>
                    <row>3</row>
                    <col>2</col>
                    <legend>Set heading</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",getprop("fdm/jsbsim/systems/autopilot/heading-true-deg"));
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                            setprop("fdm/fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                        </script>
                    </binding>
                </button>
                <text>
                    <label>PHI heading</label>
                    <halign>right</halign>
                    <row>4</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>4</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/phi-heading</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                        </script>
                    </binding>
                </radio>
                <text>
                    <row>4</row>
                    <col>2</col>
                    <label>99999</label>
                    <live>true</live>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/phi-heading-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
            </group>
        </group>
        
        <vrule/>
        
        <group>
            <!-- Pitch/Altitude -->
            <layout>vbox</layout>
            <group>
                <layout>hbox</layout>
                <group>
                    <layout>table</layout>
                    <checkbox>
                        <row>0</row>
                        <col>0</col>
                        <label>Pitch/Altitude Control</label>
                        <halign>fill</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/altitude-active</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </checkbox>
                </group>
            </group>
            <hrule/>
            <group>
                <layout>table</layout>
                <text>
                    <label>Vertical Speed</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/vertical-speed</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>0</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/vertical-speed-fpm</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>0</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%4.0f (fpm)</format>
                    <property>fdm/jsbsim/systems/autopilot/v-up-fpm-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <text>
                    <label>Pitch Hold</label>
                    <halign>right</halign>
                    <row>1</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>1</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-hold</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>1</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>1</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/attitude/theta-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <text>
                    <label>Altitude Hold</label>
                    <halign>right</halign>
                    <row>2</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-hold</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold") == 1) {
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed") == 0 and 
                                    getprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold") == 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold",1.0);
                                    if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg") < 5.0) {
                                        setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg",5.0);
                                    }
                                }
                            }
                        ]]></script>
                    </binding>
                </radio>
                <input>
                    <row>2</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-hold-ft</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>2</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%5.0f (ft)</format>
                    <property>fdm/jsbsim/systems/autopilot/h-sl-ft-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <button>
                    <row>3</row>
                    <col>2</col>
                    <legend>Set altitude</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold-ft",getprop("fdm/jsbsim/systems/autopilot/h-sl-ft-lag"));
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold",1.0);
                        </script>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold") == 1) {
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed") == 0 and 
                                    getprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold") == 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold",1.0);
                                    if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg") < 5.0) {
                                        setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg",5.0);
                                    }
                                }
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/altitude-active") == 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/altitude-active",1.0);
                                }
                            }
                        ]]></script>
                    </binding>
                </button>
            </group>
        </group>
    </group>
    
    <hrule/>
    
    <!-- Speed contrl -->
    <group>
        <layout>vbox</layout>
        <group>
            <layout>hbox</layout>
            <group>
                <layout>table</layout>
                <checkbox>
                    <row>0</row>
                    <col>0</col>
                    <label>Speed Control</label>
                    <halign>fill</halign>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-control</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </checkbox>
                <text>
                    <label>Control with speed-brake</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>1</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-brake</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
                <text>
                    <label>Automatic flap</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>3</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>4</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-automatic-flap</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
                <text>
                    <label>Automatic gear</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>5</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>6</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-automatic-gear</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
            </group>
        </group>
        <hrule/>
        <group>
            <layout>table</layout>
            <text>
                <label>Speed (mph)</label>
                <halign>right</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <input>
                <row>0</row>
                <col>1</col>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-mph</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <text>
                <row>0</row>
                <col>2</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/velocities/vtrue-kts</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <label>Speed (mach)</label>
                <halign>right</halign>
                <row>0</row>
                <col>3</col>
            </text>
            <input>
                <row>0</row>
                <col>4</col>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-mach</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <text>
                <row>0</row>
                <col>5</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%1.2f</format>
                <property>fdm/jsbsim/velocities/mach</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <label>Speed by throttle</label>
                <halign>right</halign>
                <row>1</row>
                <col>0</col>
            </text>
            <radio>
                <row>1</row>
                <col>1</col>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-throttle</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/speed-pitch",0.0);
                    </script>
                </binding>
            </radio>
            <text>
                <label>Speed by pitch</label>
                <halign>right</halign>
                <row>1</row>
                <col>2</col>
            </text>
            <radio>
                <row>1</row>
                <col>3</col>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-pitch</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle",0.0);
                    </script>
                </binding>
            </radio>
        </group>
    </group>
    
</PropertyList>
