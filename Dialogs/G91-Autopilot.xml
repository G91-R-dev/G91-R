<?xml version="1.0" encoding="ISO-8859-1"?>

<PropertyList>
    
    <name>PHI_Autopilot</name>
    <layout>vbox</layout>
    <default-padding>8</default-padding>
    <modal>false</modal>
    <width>900</width>
    
    <!-- title bar -->
    <group>
        <layout>hbox</layout>
        <empty><stretch>true</stretch></empty>
        <text>
            <label>Pilot assistant</label>
        </text>
        <empty><stretch>true</stretch></empty>
        <button>
            <legend/>
            <key>Esc</key>
            <pref-width>16</pref-width>
            <pref-height>16</pref-height>
            <border>2</border>
            <binding>
                <command>dialog-close</command>
            </binding>
        </button>
    </group>
    
    <hrule/>
    
    <group>
        <layout>hbox</layout>
        <group>
            <!-- Heading -->
            <layout>vbox</layout>
            <group>
                <layout>hbox</layout>
                <group>
                    <layout>table</layout>
                    <checkbox>
                        <row>0</row>
                        <col>0</col>
                        <label>Heading Control</label>
                        <halign>fill</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/heading-control</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </checkbox>
                </group>
            </group>
            <hrule/>
            <group>
                <layout>table</layout>
                <layout>table</layout>
                <text>
                    <label>Wings Level</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/wing-leveler</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                        </script>
                    </binding>
                </radio>
                <text>
                    <label>Maximum wing slope</label>
                    <halign>right</halign>
                    <row>1</row>
                    <col>0</col>
                </text>
                <input>
                    <row>1</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading-max-wing-slope-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <label>True heading</label>
                    <halign>right</halign>
                    <row>2</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>2</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <button>
                    <row>2</row>
                    <col>3</col>
                    <legend>Set heading</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",getprop("fdm/jsbsim/systems/autopilot/heading-true-deg"));
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                        </script>
                    </binding>
                </button>
                <text>
                    <label>PHI heading</label>
                    <halign>right</halign>
                    <row>3</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>3</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/phi-heading</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                        </script>
                    </binding>
                </radio>
                <text>
                    <row>3</row>
                    <col>2</col>
                    <label>99999</label>
                    <live>true</live>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/phi-heading-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
            </group>
  
            <hrule/>
            <group>
                <layout>table</layout>
                <text>
                    <row>0</row>
                    <col>0</col>
                    <label>99999</label>
                    <live>true</live>
                    <format>Phi: %3.1f</format>
                    <property>fdm/jsbsim/attitude/phi-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <text>
                    <row>0</row>
                    <col>1</col>
                    <label>99999</label>
                    <live>true</live>
                    <format>Delta: %3.2f</format>
                    <property>fdm/jsbsim/systems/autopilot/true-heading-deg-delta</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <text>
                    <row>0</row>
                    <col>2</col>
                    <label>99999</label>
                    <live>true</live>
                    <format>P-aero: %3.2f</format>
                    <property>fdm/jsbsim/velocities/p-aero-rad_sec</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <text>
                    <row>1</row>
                    <col>0</col>
                    <label>99999</label>
                    <live>true</live>
                    <format>Wing slope: %3.1f</format>
                    <property>fdm/jsbsim/systems/autopilot/true-heading-turn-direction-versus-slope-sw-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
            </group>

        </group>
        <vrule/>
        <group>
            <!-- Pitch/Altitude -->
            <layout>vbox</layout>
            <group>
                <layout>hbox</layout>
                <group>
                    <layout>table</layout>
                    <checkbox>
                        <row>0</row>
                        <col>0</col>
                        <label>Pitch/Altitude Control</label>
                        <halign>fill</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/altitude-active</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </checkbox>
                </group>
            </group>
            <hrule/>
            <group>
                <layout>table</layout>
                <text>
                    <label>Vertical Speed</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/vertical-speed</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>0</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/vertical-speed-fpm</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>0</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%4.0f (fpm)</format>
                    <property>fdm/jsbsim/systems/autopilot/vertical-speed-fpm</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <text>
                    <label>Pitch Hold</label>
                    <halign>right</halign>
                    <row>1</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>1</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-hold</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>1</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>1</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/pitch-hold-deg-mod</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.9</blue>
                    </color>
                </text>
                <text>
                    <label>Altitude Hold</label>
                    <halign>right</halign>
                    <row>2</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-hold</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
                <input>
                    <row>2</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-hold-ft</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <label>(ft)</label>
                    <halign>left</halign>
                    <row>2</row>
                    <col>3</col>
                </text>
                <button>
                    <row>3</row>
                    <col>2</col>
                    <legend>Set altitude</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold-ft",getprop("fdm/jsbsim/systems/autopilot/h-sl-ft-lag"));
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold",1.0);
                        </script>
                    </binding>
                </button>
            </group>
        </group>
    </group>
    <!--
    <hrule/>
    <vrule/>
    <group>
        <layout>table</layout>
        <text>
            <row>0</row>
            <col>0</col>
            <label>99999</label>
            <live>true</live>
            <format>Kp: %2.2f</format>
            <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-kp</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <slider>
            <row>0</row>
            <col>1</col>
            <name>Kp</name>
            <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-kp</property>
            <min>0.0</min>
            <max>5.0</max>
            <step>0.01</step> 
            <binding>
                <command>dialog-apply</command>
            </binding>
        </slider>
        <text>
            <row>1</row>
            <col>0</col>
            <label>99999</label>
            <live>true</live>
            <format>Ki: %2.2f</format>
            <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-ki</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <slider>
            <row>1</row>
            <col>1</col>
            <name>Ki</name>
            <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-ki</property>
            <min>0.0</min>
            <max>5.0</max>
            <step>0.01</step>
            <binding>
                <command>dialog-apply</command>
            </binding>
        </slider>
        <text>
            <row>2</row>
            <col>0</col>
            <label>99999</label>
            <live>true</live>
            <format>Kd: %2.2f</format>
            <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-kd</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <slider>
            <row>2</row>
            <col>1</col>
            <name>Kd</name>
            <property>fdm/jsbsim/systems/autopilot/vertical-speed-pid-kd</property>
            <min>0.0</min>
            <max>5.0</max>
            <step>0.1</step>
            <binding>
                <command>dialog-apply</command>
            </binding>
        </slider>
        <text>
            <row>1</row>
            <col>2</col>
            <label>99999</label>
            <live>true</live>
            <format>Err lag: %4.2f</format>
            <property>fdm/jsbsim/systems/autopilot/vertical-speed-pitch-error-lag</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <text>
            <row>2</row>
            <col>2</col>
            <label>99999</label>
            <live>true</live>
            <format>Alt norm: %4.2f</format>
            <property>fdm/jsbsim/systems/autopilot/altitude-hold-error-norm</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <text>
            <row>3</row>
            <col>2</col>
            <label>99999</label>
            <live>true</live>
            <format>Alt norm: %4.2f</format>
            <property>fdm/jsbsim/systems/autopilot/altitude-hold-ap-pid-norm</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        
        <text>
            <row>4</row>
            <col>2</col>
            <label>99999</label>
            <live>true</live>
            <format>Versus: %2.2f</format>
            <property>fdm/jsbsim/systems/autopilot/altitude-hold-versus-lag</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
    </group>
    -->
    <!-- Display status data -->
    <hrule/>
    <group>
        <layout>table</layout>
        <text>
            <row>0</row>
            <col>0</col>
            <label>99999</label>
            <halign>left</halign>
            <live>true</live>
            <format>Vel (fps): %4.0f</format>
            <property>fdm/jsbsim/velocities/vtrue-fps</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <text>
            <row>0</row>
            <col>1</col>
            <label>99999</label>
            <halign>left</halign>
            <live>true</live>
            <format>Vert (fpm): %4.0f</format>
            <property>fdm/jsbsim/systems/autopilot/v-up-fpm-lag</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <text>
            <row>0</row>
            <col>2</col>
            <label>99999</label>
            <halign>left</halign>
            <live>true</live>
            <format>Pitch (deg): %3.1f</format>
            <property>orientation/pitch-deg</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <text>
            <row>0</row>
            <col>3</col>
            <label>99999</label>
            <halign>left</halign>
            <live>true</live>
            <format>Alt (ft): %5.0f</format>
            <property>fdm/jsbsim/systems/autopilot/h-sl-ft-lag</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <text>
            <row>0</row>
            <col>4</col>
            <label>99999</label>
            <halign>left</halign>
            <live>true</live>
            <format>Heading (deg): %3.1f</format>
            <property>fdm/jsbsim/systems/autopilot/heading-true-deg</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.9</blue>
            </color>
        </text>
        <!--
        <text>
            <row>0</row>
            <col>4</col>
            <label>99999</label>
            <halign>left</halign>
            <live>true</live>
            <format>PID 1: %5.3f</format>
            <property>fdm/jsbsim/systems/autopilot/vertical-speed-ap-pid-norm</property>
            <color>
                <red>0.2</red>
                <green>0.9</green>
                <blue>0.2</blue>
            </color>
        </text>
        <text>
            <row>0</row>
            <col>5</col>
            <label>99999</label>
            <halign>left</halign>
            <live>true</live>
            <format>PID 2: %5.3f</format>
            <property>fdm/jsbsim/systems/autopilot/altitude-hold-ap-pid-norm</property>
            <color>
                <red>0.9</red>
                <green>0.9</green>
                <blue>0.2</blue>
            </color>
        </text>
        -->
    </group>
    <hrule/>
</PropertyList>
