<?xml version="1.0" encoding="ISO-8859-1"?>

<PropertyList>
    
    <name>PHI_Autopilot</name>
    <layout>vbox</layout>
    <default-padding>8</default-padding>
    <modal>false</modal>
    <width>1024</width>
    
    <!-- title bar -->
    <group>
        <layout>hbox</layout>
        <empty><stretch>true</stretch></empty>
        <text>
            <label>Pilot assistant</label>
        </text>
        <empty><stretch>true</stretch></empty>
        <button>
            <legend/>
            <key>Esc</key>
            <pref-width>16</pref-width>
            <pref-height>16</pref-height>
            <border>2</border>
            <binding>
                <command>dialog-close</command>
            </binding>
        </button>
    </group>
    
    <hrule/>
    
    <group>
        <layout>hbox</layout>
        <group>
            <!-- Heading -->
            <layout>vbox</layout>
            <group>
                <layout>hbox</layout>
                <group>
                    <layout>table</layout>
                    <checkbox>
                        <row>0</row>
                        <col>0</col>
                        <label>Heading Control</label>
                        <halign>fill</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/heading-control</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                        <binding>
                            <command>nasal</command>
                            <script>
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/heading-control") == 1.0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination",1.0);
                                }
                            </script>
                        </binding>
                    </checkbox>
                    <radio>
                        <row>0</row>
                        <col>1</col>
                        <label>Auto Coordination</label>
                        <property>fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </radio>
                </group>
            </group>
            <hrule/>
            <group>
                <layout>table</layout>
                <layout>table</layout>
                <text>
                    <label>Wings Level</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/wing-leveler</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                        </script>
                    </binding>
                </radio>
                <text>
                    <label>Maximum wing slope</label>
                    <halign>right</halign>
                    <row>1</row>
                    <col>0</col>
                </text>
                <input>
                    <row>1</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading-max-wing-slope-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>1</row>
                    <col>2</col>
                    <label>999999999999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/true-heading-turn-direction-versus-slope-sw-lag-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>1</row>
                    <col>3</col>
                    <label>999999999999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>R %2.1f (nm)</format>
                    <property>fdm/jsbsim/systems/autopilot/turn-radius-nm-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <label>True heading</label>
                    <halign>right</halign>
                    <row>2</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/true-heading-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>2</row>
                    <col>2</col>
                    <label>999999999999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/heading-true-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <row>2</row>
                    <col>3</col>
                    <label>999999999999</label>
                    <live>true</live>
                    <halign>right</halign>
                    <format>%3.2f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/true-heading-deg-delta</property>
                    <color>
                        <red>0.2</red>
                        <green>0.9</green>
                        <blue>0.2</blue>
                    </color>
                </text>
                <button>
                    <row>3</row>
                    <col>0</col>
                    <legend>Left - 5 (deg)</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",math.round(0.5 + getprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg")) - 5);
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination",1.0);
                        </script>
                    </binding>
                </button>
                <button>
                    <row>3</row>
                    <col>1</col>
                    <legend>Set actual heading</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",math.round(getprop("fdm/jsbsim/systems/autopilot/heading-true-deg")));
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination",1.0);
                        </script>
                    </binding>
                </button>
                <button>
                    <row>3</row>
                    <col>2</col>
                    <legend>Right + 5 (deg)</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg",math.round(0.5 + getprop("fdm/jsbsim/systems/autopilot/gui/true-heading-deg")) + 5);
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/rudder-auto-coordination",1.0);
                        </script>
                    </binding>
                </button>
                <text>
                    <label>PHI heading</label>
                    <halign>right</halign>
                    <row>4</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>4</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/phi-heading</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/wing-leveler",0.0);
                        </script>
                    </binding>
                </radio>
                <text>
                    <row>4</row>
                    <col>2</col>
                    <label>99999</label>
                    <live>true</live>
                    <format>%3.2f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/phi-heading-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
            </group>
        </group>
        
        <vrule/>
        
        <group>
            <!-- Pitch/Altitude -->
            <layout>vbox</layout>
            <group>
                <layout>hbox</layout>
                <group>
                    <layout>table</layout>
                    <checkbox>
                        <row>0</row>
                        <col>0</col>
                        <label>Pitch/Altitude Control</label>
                        <halign>fill</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/altitude-active</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </checkbox>
                    <text>
                        <row>0</row>
                        <col>2</col>
                        <label>999999999999999</label>
                        <halign>left</halign>
                        <live>true</live>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-control-geo-is-nil</property>
                        <color>
                            <red>0.8</red>
                            <green>0.0</green>
                            <blue>0.0</blue>
                        </color>
                    </text>
                    <radio>
                        <row>1</row>
                        <col>0</col>
                        <label>Impact control</label>
                        <halign>left</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-control-active</property>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                        <binding>
                            <command>nasal</command>
                            <script>
                                setprop("fdm/jsbsim/systems/autopilot/gui/pitch-descent-angle",0.0);
                            </script>
                        </binding>
                    </radio>
                    <slider>
                        <row>1</row>
                        <col>1</col>
                        <name>impact_control_ramp_deg</name>
                        <halign>left</halign>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-medium-time</property>
                        <min>5.0</min>
                        <max>20.0</max>
                        <step>1</step>
                        <live>true</live>
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </slider>
                    <text>
                        <row>1</row>
                        <col>2</col>
                        <label>99999999</label>
                        <halign>left</halign>
                        <live>true</live>
                        <format>%1.1f (adr)</format>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-medium-time</property>
                        <color>
                            <red>0.9</red>
                            <green>0.9</green>
                            <blue>0.0</blue>
                        </color>
                    </text>
                    <slider>
                        <row>1</row>
                        <col>3</col>
                        <name>impact_min_z_ft</name>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-min-z-ft</property>
                        <min>100.0</min>
                        <max>500.0</max>
                        <step>10.0</step> 
                        <binding>
                            <command>dialog-apply</command>
                        </binding>
                    </slider>
                    <text>
                        <row>1</row>
                        <col>4</col>
                        <label>99999999</label>
                        <halign>left</halign>
                        <live>true</live>
                        <format>%4.0f (ft)</format>
                        <property>fdm/jsbsim/systems/autopilot/gui/impact-min-z-ft</property>
                        <color>
                            <red>0.9</red>
                            <green>0.9</green>
                            <blue>0.0</blue>
                        </color>
                    </text>
                </group>
            </group>
            <hrule/>
            <group>
                <layout>table</layout>
                <text>
                    <label>Vertical Speed</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/vertical-speed</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/pitch-descent-angle",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>0</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/vertical-speed-fpm</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>0</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%4.0f (fpm)</format>
                    <property>fdm/jsbsim/systems/autopilot/v-up-fpm-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <label>Pitch Hold</label>
                    <halign>right</halign>
                    <row>1</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>1</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-hold</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/pitch-descent-angle",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>1</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>1</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/attitude/theta-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <label>Descent angle</label>
                    <halign>right</halign>
                    <row>2</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>2</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-descent-angle</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold",0.0);
                        </script>
                    </binding>
                </radio>
                <input>
                    <row>2</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/pitch-descent-angle-deg</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>2</row>
                    <col>3</col>
                    <label>9999999999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%3.1f (deg)</format>
                    <property>fdm/jsbsim/systems/autopilot/pitch-descent-angle-deg</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <text>
                    <label>Altitude Hold</label>
                    <halign>right</halign>
                    <row>3</row>
                    <col>0</col>
                </text>
                <radio>
                    <row>3</row>
                    <col>1</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-hold</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold") == 1) {
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed") == 0 or 
                                    getprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold") == 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold",1.0);
                                    if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg") < 6.0) {
                                        setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg",6.0);
                                    }
                                }
                            }
                        ]]></script>
                    </binding>
                </radio>
                <input>
                    <row>3</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/altitude-hold-ft</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </input>
                <text>
                    <row>3</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%5.0f (ft)</format>
                    <property>fdm/jsbsim/systems/autopilot/h-sl-ft-lag</property>
                    <color>
                        <red>0.9</red>
                        <green>0.9</green>
                        <blue>0.0</blue>
                    </color>
                </text>
                <button>
                    <row>4</row>
                    <col>1</col>
                    <legend>Set altitude</legend>
                    <halign>fill</halign>
                    <live>true</live>
                    <binding>
                        <command>nasal</command>
                        <script>
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold-ft",math.round(getprop("fdm/jsbsim/systems/autopilot/h-sl-ft-lag")));
                            setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold",1.0);
                        </script>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold") == 1) {
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed") == 0 and 
                                    getprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold") == 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold",1.0);
                                    if (getprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg") < 6.0) {
                                        setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold-deg",6.0);
                                    }
                                }
                                if (getprop("fdm/jsbsim/systems/autopilot/gui/altitude-active") == 0) {
                                    setprop("fdm/jsbsim/systems/autopilot/gui/altitude-active",1.0);
                                }
                            }
                        ]]></script>
                    </binding>
                </button>
                <text>
                    <row>4</row>
                    <col>3</col>
                    <label>99999</label>
                    <halign>left</halign>
                    <live>true</live>
                    <format>%5.0f (ft)</format>
                    <property>fdm/jsbsim/systems/autopilot/altitude-hold-ft-dif</property>
                    <color>
                        <red>0.8</red>
                        <green>0.8</green>
                        <blue>0.0</blue>
                    </color>
                </text>
            </group>
        </group>
    </group>
    
    <hrule/>
    
    <!-- Speed contrl -->
    <group>
        <layout>vbox</layout>
        <group>
            <layout>hbox</layout>
            <group>
                <layout>table</layout>
                <checkbox>
                    <row>0</row>
                    <col>0</col>
                    <label>Speed Control</label>
                    <halign>fill</halign>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-control</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script>
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-control") == 1.0 and
                            getprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle") == 0.0 and
                            getprop("fdm/jsbsim/systems/autopilot/gui/speed-pitch") == 0.0) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle",1.0);
                            }
                        </script>
                    </binding>
                </checkbox>
                <text>
                    <label>Speed by throttle</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>1</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>2</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-throttle</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-pitch",0.0);
                            } else {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-pitch",1.0);
                            }
                        ]]></script>
                    </binding>
                </radio>
                <text>
                    <label>Speed by pitch</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>3</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>4</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-pitch</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                    <binding>
                        <command>nasal</command>
                        <script><![CDATA[
                            if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-pitch") == 1) {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/vertical-speed",0.0);
                                setprop("fdm/jsbsim/systems/autopilot/gui/pitch-hold",1.0);
                            } else {
                                setprop("fdm/jsbsim/systems/autopilot/gui/speed-throttle",1.0);
                            }
                        ]]></script>
                    </binding>
                </radio>
                <text>
                    <label>Control with speed-brake</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>5</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>6</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-brake</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
                <text>
                    <label>Automatic flap</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>7</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>8</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-automatic-flap</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
                <text>
                    <label>Automatic gear</label>
                    <halign>right</halign>
                    <row>0</row>
                    <col>9</col>
                </text>
                <radio>
                    <row>0</row>
                    <col>10</col>
                    <property>fdm/jsbsim/systems/autopilot/gui/speed-automatic-gear</property>
                    <live>true</live>
                    <binding>
                        <command>dialog-apply</command>
                    </binding>
                </radio>
            </group>
        </group>
        <hrule/>
        <group>
            <layout>table</layout>
            <text>
                <label>Speed control</label>
                <halign>left</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <radio>
                <row>0</row>
                <col>1</col>
                <label>TAS</label>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-set-mph</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script><![CDATA[
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph") == 1) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",math.round(getprop("fdm/jsbsim/systems/autopilot/speed-true-on-air")));
                        }
                    ]]></script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>2</col>
                <label>CAS</label>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-set-cas</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script><![CDATA[
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas") == 1) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",math.round(getprop("fdm/jsbsim/systems/autopilot/speed-cas-on-air")));
                        }
                    ]]></script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>3</col>
                <label>Mach</label>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-set-mach</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script><![CDATA[
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mach") == 1) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-mph",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-set-cas",0.0);
                            setprop("fdm/jsbsim/systems/autopilot/gui/speed-value",math.round(getprop("fdm/jsbsim/systems/autopilot/speed-mach-on-air")));
                        }
                    ]]></script>
                </binding>
            </radio>
            <input>
                <row>0</row>
                <col>4</col>
                <property>fdm/jsbsim/systems/autopilot/gui/speed-value</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <text>
                <label>TAS</label>
                <halign>right</halign>
                <row>0</row>
                <col>5</col>
            </text>
            <text>
                <row>0</row>
                <col>6</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-true-on-air</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>CAS</label>
                <halign>right</halign>
                <row>0</row>
                <col>7</col>
            </text>
            <text>
                <row>0</row>
                <col>8</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-cas-on-air</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Mach</label>
                <halign>right</halign>
                <row>0</row>
                <col>9</col>
            </text>
            <text>
                <row>0</row>
                <col>10</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%1.3f</format>
                <property>fdm/jsbsim/systems/autopilot/speed-mach-on-air</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
        </group>
        <hrule/>
        <group>
            <layout>table</layout>
            <text>
                <label>Total fuel (lbs)</label>
                <halign>left</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <text>
                <row>0</row>
                <col>1</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.1f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-total-lbs</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Flow rate (lb/hr)</label>
                <halign>left</halign>
                <row>0</row>
                <col>2</col>
            </text>
            <text>
                <row>0</row>
                <col>3</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-flow-rate-lbhr</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Fuel remain (%)</label>
                <halign>left</halign>
                <row>0</row>
                <col>4</col>
            </text>
            <text>
                <row>0</row>
                <col>5</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-remain-percent</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Dropp. Fuel (lbr)</label>
                <halign>left</halign>
                <row>0</row>
                <col>6</col>
            </text>
            <text>
                <row>0</row>
                <col>7</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-droppable-remain-lbs</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>8</col>
                <label>Drop tank pressure auto</label>
                <property>fdm/jsbsim/systems/autopilot/fuel-droppable-auto</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
        </group>
        
        <hrule/>
        
        <group>
            <layout>table</layout>
            <text>
                <label>Trust (lbs)</label>
                <halign>left</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <text>
                <row>0</row>
                <col>1</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.1f</format>
                <property>fdm/jsbsim/propulsion/engine/thrust-lbs</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Throttle n1 (%)</label>
                <halign>left</halign>
                <row>0</row>
                <col>2</col>
            </text>
            <slider>
                <row>0</row>
                <col>3</col>
                <name>Throttle power</name>
                <live>true</live>
                <property>controls/engines/engine/throttle</property>
                <min>0.0</min>
                <max>1.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>4</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%3.1f</format>
                <property>fdm/jsbsim/propulsion/engine/n1</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Fuel/Thrust</label>
                <halign>left</halign>
                <row>0</row>
                <col>5</col>
            </text>
            <text>
                <row>0</row>
                <col>6</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%1.2f</format>
                <property>fdm/jsbsim/systems/autopilot/propulsion-specific-con</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Time res. (s)</label>
                <halign>left</halign>
                <row>0</row>
                <col>7</col>
            </text>
            <text>
                <row>0</row>
                <col>8</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.0f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-time-residue-sec</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Distance res. (nm)</label>
                <halign>left</halign>
                <row>0</row>
                <col>9</col>
            </text>
            <text>
                <row>0</row>
                <col>10</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.0f</format>
                <property>fdm/jsbsim/systems/autopilot/fuel-mph-residue</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
        </group>
        
        <hrule/>
        
        <group>
            <layout>table</layout>
            <button>
                <row>0</row>
                <col>0</col>
                <legend>  Take off </legend>
                <halign>fill</halign>
                <live>true</live>
                <binding>
                    <command>property-toggle</command>
                    <property>fdm/jsbsim/systems/autopilot/gui/take-off-activate</property>
                </binding>
            </button>
            <text>
                <row>0</row>
                <col>1</col>
                <label>999999999999999999999999999999999999999999999</label>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-status</property>
                <live>true</live>
                <halign>left</halign>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <radio>
                <row>0</row>
                <col>2</col>
                <label>Altitude top</label>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-altitude-top-active</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <input>
                <row>0</row>
                <col>3</col>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-altitude-top</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <radio>
                <row>0</row>
                <col>4</col>
                <label>Heading to</label>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-to-heading-active</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <input>
                <row>0</row>
                <col>5</col>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-to-heading</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            <radio>
                <row>0</row>
                <col>6</col>
                <label>Cruise speed</label>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-cruise-speed-active</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <input>
                <row>0</row>
                <col>7</col>
                <property>fdm/jsbsim/systems/autopilot/gui/take-off-cruise-speed</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </input>
            
        </group>
        
        <hrule/>
        
        <group>
            <layout>table</layout>
            <button>
                <row>0</row>
                <col>0</col>
                <legend>PHI Route</legend>
                <halign>fill</halign>
                <live>true</live>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/gauges/PHI/program/route[1]/phi",math.round(getprop("fdm/jsbsim/systems/autopilot/heading-true-deg")));
                        setprop("fdm/jsbsim/systems/autopilot/gui/heading-control",1.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/phi-heading",1.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/true-heading",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/true-heading-max-wing-slope-deg",45.0);
                        setprop("fdm/jsbsim/systems/gauges/PHI/program/route[1]/dist",10.0);
                        setprop("fdm/jsbsim/systems/gauges/PHI/wind/automatic-wind-sw",1.0);
                        setprop("fdm/jsbsim/systems/gauges/PHI/doppler/switch-turn",2.0);
                        setprop("fdm/jsbsim/systems/gauges/PHI/indicator/switch-turn",1.0);
                        setprop("fdm/jsbsim/systems/gauges/PHI/program/route-manager/autopush-active",1.0);
                        var altitude = math.round(getprop("fdm/jsbsim/systems/autopilot/gui/altitude-hold-ft"));
                        setprop("fdm/jsbsim/systems/gauges/PHI/program/route-altitude-hold-ft",altitude);
                        setprop("fdm/jsbsim/systems/gauges/PHI/program/route[1]/altitude-hold-ft",altitude);
                        setprop("fdm/jsbsim/systems/gauges/PHI/program/route[2]/altitude-hold-ft",altitude);
                        setprop("fdm/jsbsim/systems/gauges/PHI/program/route[3]/altitude-hold-ft",altitude);
                        setprop("fdm/jsbsim/systems/gauges/PHI/program/route[4]/altitude-hold-ft",altitude);
                        setprop("fdm/jsbsim/systems/gauges/PHI/program/route[5]/altitude-hold-ft",altitude);
                    </script>
                </binding>
                <binding>
                    <command>property-toggle</command>
                    <property>fdm/jsbsim/systems/gauges/PHI/program/route[1]/push-togle</property>
                </binding>
            </button>
            <text>
                <row>0</row>
                <col>1</col>
                <halign>left</halign>
            </text>
            <text>
                <row>0</row>
                <col>2</col>
                <halign>left</halign>
            </text>
            <text>
                <row>0</row>
                <col>3</col>
                <halign>left</halign>
            </text>
            <text>
                <row>0</row>
                <col>4</col>
                <halign>left</halign>
            </text>
            <text>
                <row>0</row>
                <col>5</col>
                <halign>left</halign>
            </text>
            <text>
                <row>0</row>
                <col>6</col>
                <halign>left</halign>
            </text>
            <text>
                <row>0</row>
                <col>7</col>
                <halign>left</halign>
            </text>
            <text>
                <row>0</row>
                <col>8</col>
                <halign>left</halign>
            </text>
        </group>
        
        <hrule/>
        
        <group>
            <!-- Autolanding Airport selector -->
            <layout>table</layout>
            <button>
                <row>0</row>
                <col>0</col>
                <legend>Auto landing</legend>
                <halign>fill</halign>
                <live>true</live>
                <binding>
                    <command>property-toggle</command>
                    <property>fdm/jsbsim/systems/autopilot/gui/landing-activate</property>
                </binding>
            </button>
            <text>
                <row>0</row>
                <col>1</col>
                <halign>left</halign>
                <label>Airport selector: </label>
            </text>
            <radio>
                <row>0</row>
                <col>2</col>
                <label>Near RW</label>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_nearest_runway</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>3</col>
                <label>Short prof</label>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-short-profile</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </radio>
            <text>
                <row>0</row>
                <col>4</col>
                <label>Ranway min lenght:</label>
                <halign>left</halign>
            </text>
            <slider>
                <row>0</row>
                <col>5</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-minimal-length-m</property>
                <min>1000.0</min>
                <max>3000.0</max>
                <step>1</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/landing-minimal-length-m") > 2000) {
                            setprop("fdm/jsbsim/systems/autopilot/gui/landing-short-profile",0);
                        } else {
                            setprop("fdm/jsbsim/systems/autopilot/gui/landing-short-profile",1);
                        }
                    </script>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>6</col>
                <label>9999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%4.0f (ft)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-minimal-length-m</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>7</col>
                <label>Direct airport sel:</label>
                <halign>left</halign>
            </text>
            <input>
                <row>0</row>
                <col>8</col>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_select_name_direct</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/airport_select_id_direct",1);
                    </script>
                </binding>
            </input>
            
        </group>
        
        <group>
            <!-- Autolanding status -->
            <layout>table</layout>
            <text>
                <row>0</row>
                <col>0</col>
                <label>999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Status: [% 2.1f] </format>
                <property>fdm/jsbsim/systems/autopilot/gui/landig-status-id</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>1</col>
                <label>9999999999999999999999999999999999999999999999999999999</label>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_landing_status</property>
                <live>true</live>
                <halign>left</halign>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>2</col>
                <label>9999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Dist. %3.1f (nm)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_runway_distance</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>3</col>
                <label>9999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Delta %5.0f (ft)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_runway_delta_altitude</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>4</col>
                <label>999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Head %3.0f (deg)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_runway_airplane_heading_correct</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>5</col>
                <label>999999999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>Slope %2.1f (deg)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/airport_runway_airplane_slope</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
        </group>
            
        <group>
            <!-- Autolanding parameters -->
            <layout>table</layout>
            <text>
                <row>0</row>
                <col>0</col>
                <label>Hovering distance:</label>
                <halign>left</halign>
            </text>
            <slider>
                <row>0</row>
                <col>1</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-dist-nm</property>
                <min>5.0</min>
                <max>30.0</max>
                <step>1</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        var dist = getprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-dist-nm");
                        var elev = getprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-h-ft");
                        setprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-slope",math.atan((elev/6076.12)/dist)*R2D);
                    </script>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>2</col>
                <label>9999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.0f (nm)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-dist-nm</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>3</col>
                <label>Hovering alt:</label>
                <halign>left</halign>
            </text>
            <slider>
                <row>0</row>
                <col>4</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-h-ft</property>
                <min>3000.0</min>
                <max>10000.0</max>
                <step>500</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        var dist = getprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-dist-nm");
                        var elev = getprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-h-ft");
                        setprop("fdm/jsbsim/systems/autopilot/gui/landing-holding-point-slope",math.atan((elev/6076.12)/dist)*R2D);
                    </script>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>5</col>
                <label>9999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%5.0f (ft)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-h-ft</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>6</col>
                <halign>left</halign>
                <label>Start landing slope:</label>
            </text>
            <text>
                <row>0</row>
                <col>7</col>
                <label>9999999999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.1f (deg)</format>
                <property>fdm/jsbsim/systems/autopilot/gui/landing-holding-point-slope</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
        </group>
    
        
        <!-- PID configurator -->
        
        <!--
            The PID configurator is defined by: Ziegler–Nichols method
            https://en.wikipedia.org/wiki/Ziegler%E2%80%93Nichols_method
            With the four variants:
            Zingler-Nichols Classic
            Possen Integral Rule
            Some Overshoot
            No Overshoot
        -->
<!--
        <hrule/>
        
        <group>
            <layout>table</layout>
            <radio>
                <row>0</row>
                <col>0</col>
                <label>Zingler-Nichols Classic</label>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-czn</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-pir",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-so",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-no",0.0);
                    </script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>1</col>
                <label>Possen Integral Rule</label>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-pir</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-czn",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-so",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-no",0.0);
                    </script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>2</col>
                <label>Some Overshoot</label>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-so</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-czn",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-pir",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-no",0.0);
                    </script>
                </binding>
            </radio>
            <radio>
                <row>0</row>
                <col>3</col>
                <label>No Overshoot</label>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-no</property>
                <live>true</live>
                <binding>
                    <command>dialog-apply</command>
                </binding>
                <binding>
                    <command>nasal</command>
                    <script>
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-czn",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-pir",0.0);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-so",0.0);
                    </script>
                </binding>
            </radio>
        </group>
        <group>
            <layout>table</layout>
            <text>
                <label>Ku</label>
                <halign>left</halign>
                <row>0</row>
                <col>0</col>
            </text>
            <slider>
                <row>0</row>
                <col>2</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-ku</property>
                <min>0.0</min>
                <max>5.0</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>3</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-ku</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <text>
                <label>Tu</label>
                <halign>left</halign>
                <row>0</row>
                <col>4</col>
            </text>
            <slider>
                <row>0</row>
                <col>5</col>
                <live>true</live>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-tu</property>
                <min>0.0</min>
                <max>10</max>
                <step>0.01</step>
                <binding>
                    <command>dialog-apply</command>
                </binding>
            </slider>
            <text>
                <row>0</row>
                <col>6</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-tu</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.9</blue>
                </color>
            </text>
            <button>
                <row>0</row>
                <col>7</col>
                <legend>Calculate</legend>
                <halign>fill</halign>
                <live>true</live>
                <binding>
                    <command>nasal</command>
                    <script><![CDATA[
                        var ku = getprop("fdm/jsbsim/systems/autopilot/gui/pid-ku");
                        var tu = getprop("fdm/jsbsim/systems/autopilot/gui/pid-tu");
                        var kp = 0.0;
                        var ki = 0.0;
                        var kd = 0.0;
                        if (getprop("fdm/jsbsim/systems/autopilot/gui/pid-pir") == 1) {
                            kp = 0.7 * ku;
                            if (tu > 0.01) {
                                ki = 1.75 * ku / tu;
                                kd = 21.0 * (ku / tu) / 200.0;
                            }
                        } else if (getprop("fdm/jsbsim/systems/autopilot/gui/pid-so") == 1) {
                            kp = 0.33 * ku;
                            if (tu > 0.01) {
                                ki = 0.666 * ku / tu;
                                kd = 0.1 * (ku / tu);
                            }
                        } else if (getprop("fdm/jsbsim/systems/autopilot/gui/pid-no") == 1) {
                            kp = 0.2 * ku;
                            if (tu > 0.01) {
                                ki = (2.0/5.0) * ku / tu;
                                kd = (ku / tu) / 15.0;
                            }
                        } else {
                            kp = 0.6 * ku;
                            if (tu > 0.01) {
                                ki = 1.2 * ku / tu;
                                kd = 3.0 * (ku / tu) / 40.0;
                            }
                        }
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-kp",kp);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-ki",ki);
                        setprop("fdm/jsbsim/systems/autopilot/gui/pid-kd",kd);
                        # Modifiy data part
                        setprop("fdm/jsbsim/systems/autopilot/altitude-hold-pid-kp",kp);
                        setprop("fdm/jsbsim/systems/autopilot/altitude-hold-pid-ki",ki);
                        setprop("fdm/jsbsim/systems/autopilot/altitude-hold-pid-kd",kd);
                    ]]></script>
                </binding>
            </button>
            <text>
                <label>Kp</label>
                <halign>left</halign>
                <row>0</row>
                <col>8</col>
            </text>
            <text>
                <row>0</row>
                <col>9</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-kp</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Ki</label>
                <halign>left</halign>
                <row>0</row>
                <col>10</col>
            </text>
            <text>
                <row>0</row>
                <col>11</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.4f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-ki</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <label>Kd</label>
                <halign>left</halign>
                <row>0</row>
                <col>12</col>
            </text>
            <text>
                <row>0</row>
                <col>13</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.5f</format>
                <property>fdm/jsbsim/systems/autopilot/gui/pid-kd</property>
                <color>
                    <red>0.9</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>14</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%1.3f</format>
                <property>fdm/jsbsim/systems/autopilot/pitch-rad-error</property>
                <color>
                    <red>0.2</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>15</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%1.3f</format>
                <property>fdm/jsbsim/systems/autopilot/pitch-reset-integrator</property>
                <color>
                    <red>0.0</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>16</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/pitch-speed-ap-pid</property>
                <color>
                    <red>0.0</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
            <text>
                <row>0</row>
                <col>17</col>
                <label>99999</label>
                <halign>left</halign>
                <live>true</live>
                <format>%2.3f</format>
                <property>fdm/jsbsim/systems/autopilot/pitch-error</property>
                <color>
                    <red>0.0</red>
                    <green>0.9</green>
                    <blue>0.0</blue>
                </color>
            </text>
        </group>
        -->
        
    </group>

</PropertyList>
